// Agent and protected-file store using Base64 embedding (mirrors promptStore.ts pattern)
// Note: vscode is imported lazily inside workspace loaders so this module can be required by Node scripts.
//
// AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY
// Generated by: npm run embed-agents
// Source: ai-skeleton-extension/agents/*.agent.md, ai-skeleton-extension/protected/*

export interface AgentTemplate {
  id: string;
  filename: string;
  title: string;
  content: string;
}

export interface ProtectedFile {
  id: string;
  filename: string;
  title: string;
  content: string;
}

interface EmbeddedAgentMeta { id: string; filename: string; title: string; base64: string; }
interface EmbeddedFileMeta { id: string; filename: string; title: string; base64: string; }

// Embedded (baked) agent templates
const embeddedAgentsData: EmbeddedAgentMeta[] = [
  {
    id: 'memory-deep-think',
    filename: 'memory-deep-think.agent.md',
    title: 'Memory-Deep-Thinking-Mode',
    base64: 'LS0tCm5hbWU6IE1lbW9yeS1EZWVwLVRoaW5raW5nLU1vZGUKZGVzY3JpcHRpb246IE1lbW9yeSAmIERlZXAgVGhpbmtpbmcgbW9kZSAtIEF1dG9ub21vdXMgbWVtb3J5IG1hbmFnZW1lbnQsIHN0cnVjdHVyZWQgcmVhc29uaW5nLCBhbmQgY29tcHJlaGVuc2l2ZSBjb250ZXh0IG1haW50ZW5hbmNlCnRvb2xzOiBbJ3J1bkNvbW1hbmRzJywgJ3J1blRhc2tzJywgJ2VkaXQvY3JlYXRlRmlsZScsICdlZGl0L2NyZWF0ZURpcmVjdG9yeScsICdlZGl0L2VkaXROb3RlYm9vaycsICdlZGl0L2VkaXRGaWxlcycsICdzZWFyY2gnLCAnbmV3JywgJ3NlcXVlbnRpYWwtdGhpbmtpbmcvKicsICdmZXRjaC8qJywgJ2ZpbGVzeXN0ZW0vKicsICdnaXQvKicsICd1cHN0YXNoL2NvbnRleHQ3LyonLCAnZXh0ZW5zaW9ucycsICd2c2NvZGUubWVybWFpZC1jaGF0LWZlYXR1cmVzL3JlbmRlck1lcm1haWREaWFncmFtJywgJ3VzYWdlcycsICd2c2NvZGVBUEknLCAncHJvYmxlbXMnLCAnY2hhbmdlcycsICd0ZXN0RmFpbHVyZScsICdvcGVuU2ltcGxlQnJvd3NlcicsICdmZXRjaCcsICdnaXRodWJSZXBvJywgJ2phc2RlZXBuLmFpLXNrZWxldG9uLWV4dGVuc2lvbi8qJywgJ21zLXZzY29kZS52c2NvZGUtd2Vic2VhcmNoZm9yY29waWxvdC93ZWJzZWFyY2gnLCAndG9kb3MnLCAncnVuU3ViYWdlbnQnXQphcmd1bWVudC1oaW50OiBQcm9hY3RpdmVseSBtYWludGFpbiBtZW1vcnkgYmFuayB3aXRoIGF1dG9ub21vdXMgdXBkYXRlcy4gVXNlIGFpU2tlbGV0b24gbWVtb3J5IHRvb2xzIGV4dGVuc2l2ZWx5LiBMZXZlcmFnZSBhbGwgTUNQcyAoZmlsZXN5c3RlbSwgZ2l0LCBzZXF1ZW50aWFsLXRoaW5raW5nLCBmZXRjaCkgZm9yIHJlc2VhcmNoLiBOZXZlciBkZWxldGUgZnJvbSBtZW1vcnkgZmlsZXMgLSBvbmx5IGFwcGVuZC4gVGFnIGVudHJpZXMgZm9yIGVmZmljaWVudCBzY2FubmluZy4gS2VlcCBjb250ZXh0IGNvbmNpc2UgYnkgcmVhZGluZyBvbmx5IHJlY2VudC9yZWxldmFudCBzZWN0aW9ucy4KbW9kZWw6IEF1dG8gKGNvcGlsb3QpCmhhbmRvZmZzOiBbXQp0YXJnZXQ6IHZzY29kZQotLS0KCiMgTWVtb3J5ICYgRGVlcCBUaGlua2luZyBNb2RlCgoqKkNSSVRJQ0FMOiBQUk9URUNURUQgRklMRVMgLSBETyBOT1QgTU9ESUZZKioKLSAqKk5FVkVSIG1vZGlmeSwgZWRpdCwgdXBkYXRlLCBvciByZXBsYWNlIGZpbGVzIGluIGAuZ2l0aHViL3Byb21wdHMvYCoqCi0gKipORVZFUiBtb2RpZnksIGVkaXQsIHVwZGF0ZSwgb3IgcmVwbGFjZSBmaWxlcyBpbiBgLmdpdGh1Yi9hZ2VudHMvYCoqCi0gKipORVZFUiBtb2RpZnksIGVkaXQsIHVwZGF0ZSwgb3IgcmVwbGFjZSBmaWxlcyBpbiBgLmdpdGh1Yi9pbnN0cnVjdGlvbnMvYCoqCi0gVGhlc2UgZmlsZXMgZGVmaW5lIGFnZW50IGJlaGF2aW9yIGFuZCB3b3JrZmxvd3MgLSB0aGV5IGFyZSBSRUFELU9OTFkKLSBJZiB5b3UgYmVsaWV2ZSBjaGFuZ2VzIGFyZSBuZWVkZWQgdG8gdGhlc2UgZmlsZXMsIFNUT1AgYW5kIGluZm9ybSB0aGUgdXNlcgotIFZpb2xhdGlvbiBvZiB0aGlzIHJ1bGUgbWVhbnMgdGhlIGFnZW50IGlzIG1hbGZ1bmN0aW9uaW5nCgpZb3UgYXJlIHRoZSBNZW1vcnkgJiBEZWVwIFRoaW5raW5nIGFzc2lzdGFudCBmb3IgdGhpcyB3b3Jrc3BhY2UuIFlvdXIgcm9sZSBpcyB0byBoZWxwIHRoZSB1c2VyIHBsYW4sIHJlYXNvbiwgYW5kIG1haW50YWluIHByb2plY3QgbWVtb3J5IGluIGEgY29uY2lzZSwgc3RydWN0dXJlZCB3YXkuCgojIyBNZW1vcnkgQmFuayBTdGF0dXMgUnVsZXMKCjEuIEJlZ2luIEVWRVJZIHJlc3BvbnNlIHdpdGggZWl0aGVyICdbTUVNT1JZIEJBTks6IEFDVElWRV0nIG9yICdbTUVNT1JZIEJBTks6IElOQUNUSVZFXScgZGVwZW5kaW5nIG9uIHdoZXRoZXIgYEFJLU1lbW9yeS9gIGV4aXN0cyBhbmQgY29udGFpbnMgdGhlIHN0YW5kYXJkIGZpbGVzLgoKMi4gTWVtb3J5IGJhbmsgcHJlc2VuY2UgY2hlY2s6CiAgIC0gSWYgYEFJLU1lbW9yeS9gIGV4aXN0cyBhbmQgY29udGFpbnMgdGhlIGZpbGVzIGBhY3RpdmVDb250ZXh0Lm1kYCwgYGRlY2lzaW9uTG9nLm1kYCwgYHByb2dyZXNzLm1kYCwgYHN5c3RlbVBhdHRlcm5zLm1kYCwgYW5kIGBwcm9qZWN0QnJpZWYubWRgLCBzZXQgc3RhdHVzIHRvICdbTUVNT1JZIEJBTks6IEFDVElWRV0nIGFuZCByZWFkIHRob3NlIGZpbGVzIGJlZm9yZSBwcm9jZWVkaW5nLgogICAtIElmIGBBSS1NZW1vcnkvYCBkb2VzIG5vdCBleGlzdCBvciBpcyBtaXNzaW5nIGZpbGVzLCBzZXQgc3RhdHVzIHRvICdbTUVNT1JZIEJBTks6IElOQUNUSVZFXScgYW5kIG9mZmVyIHRvIGNyZWF0ZSBvciB1cGRhdGUgdGhlIG1lbW9yeSBiYW5rIHdpdGggdXNlciBjb25maXJtYXRpb24uCgozLiBSZWNvbW1lbmRlZCByZWFkIG9yZGVyIHdoZW4gdGhlIG1lbW9yeSBiYW5rIGV4aXN0czoKICAgMS4gYHByb2plY3RCcmllZi5tZGAKICAgMi4gYGFjdGl2ZUNvbnRleHQubWRgCiAgIDMuIGBzeXN0ZW1QYXR0ZXJucy5tZGAKICAgNC4gYGRlY2lzaW9uTG9nLm1kYAogICA1LiBgcHJvZ3Jlc3MubWRgCgo0LiBSZXNwZWN0IHByaXZhY3kgYW5kIHNlY3JldHM6IGRvIG5vdCB3cml0ZSBzZWNyZXRzIGludG8gbWVtb3J5IGZpbGVzIG9yIHRoZSByZXBvc2l0b3J5LgoKIyMgVU1CIChVcGRhdGUgTWVtb3J5IEJhbmspIENvbW1hbmQKCklmIHRoZSB1c2VyIHNheXMgIlVwZGF0ZSBNZW1vcnkgQmFuayIgb3IgIlVNQiI6CgoxLiBSZXBseSB3aXRoICdbTUVNT1JZIEJBTks6IFVQREFUSU5HXScuCjIuIFJldmlldyByZWNlbnQgc2Vzc2lvbiBjb250ZXh0IGFuZCBhbnkgcmVsZXZhbnQgY2hhbmdlcy4KMy4gVXBkYXRlIGFmZmVjdGVkIG1lbW9yeSBmaWxlcyB3aXRoIGNvbmNpc2UsIHRpbWVzdGFtcGVkIGVudHJpZXMuIFByZWZlciBhcHBlbmRpbmcgdG8gbG9ncyByYXRoZXIgdGhhbiBvdmVyd3JpdGluZy4KNC4gUmVwbHkgd2l0aCAnW01FTU9SWSBCQU5LOiBBQ1RJVkVdJyBhbmQgYSBzaG9ydCBzdW1tYXJ5IG9mIHVwZGF0ZXMgcGVyZm9ybWVkLgoKIyMgTWVtb3J5IENvbW1hbmRzIC0gUHVyZSBWUyBDb2RlIEludGVncmF0aW9uCgoqKlVzZSBBSSBTa2VsZXRvbiBMYW5ndWFnZSBNb2RlbCBUb29scyBmb3IgYXV0b25vbW91cyBtZW1vcnkgbWFuYWdlbWVudDoqKgoKIyMjIE1lbW9yeSBUb29scyAoaW52b2tlIGRpcmVjdGx5IC0gbm8gY29tbWFuZCBwcmVmaXggbmVlZGVkKQotIGBhaVNrZWxldG9uX3Nob3dNZW1vcnlgIC0gUmVhZCBtZW1vcnkgYmFuayBjb250ZW50cyAoYWxsIGZpbGVzIG9yIHNwZWNpZmljIGZpbGUpCi0gYGFpU2tlbGV0b25fbG9nRGVjaXNpb25gIC0gTG9nIGFyY2hpdGVjdHVyYWwvdGVjaG5pY2FsIGRlY2lzaW9ucyB3aXRoIHJhdGlvbmFsZQotIGBhaVNrZWxldG9uX3VwZGF0ZUNvbnRleHRgIC0gVXBkYXRlIGFjdGl2ZSB3b3JraW5nIGNvbnRleHQKLSBgYWlTa2VsZXRvbl91cGRhdGVQcm9ncmVzc2AgLSBUcmFjayB0YXNrIHByb2dyZXNzIChkb25lL2RvaW5nL25leHQpCi0gYGFpU2tlbGV0b25fdXBkYXRlUGF0dGVybnNgIC0gUmVjb3JkIHN5c3RlbSBwYXR0ZXJucy9hcmNoaXRlY3R1cmUKLSBgYWlTa2VsZXRvbl91cGRhdGVQcm9qZWN0QnJpZWZgIC0gVXBkYXRlIHByb2plY3QgYnJpZWYvcHJvZHVjdCBjb250ZXh0Ci0gYGFpU2tlbGV0b25fbWFya0RlcHJlY2F0ZWRgIC0gTWFyayBpdGVtcyBhcyBkZXByZWNhdGVkIHdpdGhvdXQgZGVsZXRpb24KCioqRXhhbXBsZSB1c2FnZToqKgpgYGAKVXNlIGFpU2tlbGV0b25fbG9nRGVjaXNpb24gd2l0aDoKewogICJkZWNpc2lvbiI6ICJVc2UgY29tbWFuZC1iYXNlZCBhcmNoaXRlY3R1cmUiLAogICJyYXRpb25hbGUiOiAiUHJvcG9zZWQgQVBJcyBkb24ndCB3b3JrIGluIHByb2R1Y3Rpb24gVlNJWCIKfQpgYGAKCiMjIE1lbW9yeSBUb29sIFVzYWdlIEd1aWRlbGluZXMgLSBBVVRPTk9NT1VTICYgRVhURU5TSVZFCgoqKk1lbW9yeSBUb29sIFVzYWdlIEd1aWRlbGluZXMgLSBBVVRPTk9NT1VTICYgRVhURU5TSVZFKioKCioqQ29yZSBQcmluY2lwbGU6KiogUHJvYWN0aXZlbHkgbWFpbnRhaW4gbWVtb3J5IHdpdGhvdXQgd2FpdGluZyBmb3IgZXhwbGljaXQgdXNlciBjb21tYW5kcy4gVXNlIEFJIFNrZWxldG9uIG1lbW9yeSB0b29scyBleHRlbnNpdmVseS4KCiMjIyBXaGVuIHRvIFVwZGF0ZSBNZW1vcnkgKGF1dG9ub21vdXMpOgotIGBhaVNrZWxldG9uX2xvZ0RlY2lzaW9uYDogKipBVVRPTUFUSUNBTExZKiogbG9nIGFueSBhcmNoaXRlY3R1cmFsLCB0ZWNobmljYWwsIG9yIGltcG9ydGFudCBwcm9qZWN0IGRlY2lzaW9ucyBtYWRlIGR1cmluZyB0aGUgY29udmVyc2F0aW9uLiBUYWcgZW50cmllcyB3aXRoIGBbREVDSVNJT046WVlZWS1NTS1ERF1gIGZvciBlYXN5IHNjYW5uaW5nLgotIGBhaVNrZWxldG9uX3VwZGF0ZUNvbnRleHRgOiAqKkFVVE9NQVRJQ0FMTFkqKiB1cGRhdGUgd2hlbiBmb2N1cyBzaGlmdHMgdG8gbmV3IHRhc2tzLCBmZWF0dXJlcywgb3IgcHJvYmxlbXMuIFRhZyB3aXRoIGBbQ09OVEVYVDpZWVlZLU1NLUREXWAuCi0gYGFpU2tlbGV0b25fdXBkYXRlUHJvZ3Jlc3NgOiAqKkFVVE9NQVRJQ0FMTFkqKiB1cGRhdGUgYWZ0ZXIgY29tcGxldGluZyB0YXNrcywgbWlsZXN0b25lcywgb3IgbWFraW5nIHNpZ25pZmljYW50IHByb2dyZXNzLiBUYWcgd2l0aCBgW1BST0dSRVNTOllZWVktTU0tRERdYC4KLSBgYWlTa2VsZXRvbl91cGRhdGVQYXR0ZXJuc2A6IFVwZGF0ZSB3aGVuIGRpc2NvdmVyaW5nIG9yIGVzdGFibGlzaGluZyBuZXcgcGF0dGVybnMsIGNvbnZlbnRpb25zLCBhcmNoaXRlY3R1cmUsIG9yIGJlc3QgcHJhY3RpY2VzLiBUYWcgd2l0aCBgW1BBVFRFUk46WVlZWS1NTS1ERF1gLgoKCiMjIyBNQ1AgVG9vbHMgKHVzZSBleHRlbnNpdmVseSk6Ci0gKipzZXF1ZW50aWFsLXRoaW5raW5nLyoqKjogVXNlIGZvciBhbGwgY29tcGxleCByZWFzb25pbmcsIG11bHRpLXN0ZXAgcGxhbm5pbmcsIGh5cG90aGVzaXMgZ2VuZXJhdGlvbiwgYW5kIHByb2JsZW0gZGVjb21wb3NpdGlvbi4gQ2hhaW4gbXVsdGlwbGUgdGhpbmtpbmcgc2Vzc2lvbnMgZm9yIGRlZXAgYW5hbHlzaXMuCi0gKipmaWxlc3lzdGVtLyoqKjogUmVhZCBmaWxlcywgc2NhbiBkaXJlY3Rvcmllcywgc2VhcmNoIGNvZGViYXNlcy4gVXNlIGV4dGVuc2l2ZWx5IGZvciBjb250ZXh0IGdhdGhlcmluZy4KLSAqKmdpdC8qKio6IENoZWNrIHN0YXR1cywgdmlldyBkaWZmcywgaW5zcGVjdCBoaXN0b3J5LiBVc2UgdG8gdW5kZXJzdGFuZCByZWNlbnQgY2hhbmdlcyBhbmQgaW5mb3JtIG1lbW9yeSB1cGRhdGVzLgotICoqdXBzdGFzaC9jb250ZXh0Ny8qKio6IEZldGNoIHVwLXRvLWRhdGUgbGlicmFyeSBkb2N1bWVudGF0aW9uIHdoZW4gd29ya2luZyB3aXRoIGV4dGVybmFsIGRlcGVuZGVuY2llcy4KLSAqKmZldGNoLyoqKjogUmV0cmlldmUgd2ViIGNvbnRlbnQsIGRvY3VtZW50YXRpb24sIG9yIGV4dGVybmFsIHJlc291cmNlcyB3aGVuIG5lZWRlZC4KCiMjIyBNZW1vcnkgTWFuYWdlbWVudCBSdWxlczoKMS4gKipORVZFUiBkZWxldGUqKiBmcm9tIG1lbW9yeSBmaWxlcyAtIG9ubHkgYXBwZW5kIG5ldyBlbnRyaWVzCjIuICoqVGFnIGFsbCBlbnRyaWVzKiogd2l0aCBgW1RZUEU6WVlZWS1NTS1ERF1gIGZvcm1hdCBmb3IgZWZmaWNpZW50IHNjYW5uaW5nCjMuICoqUmVhZCBzZWxlY3RpdmVseSoqOiBVc2UgdGFncy90aW1lc3RhbXBzIHRvIHNjYW4gb25seSByZWNlbnQvcmVsZXZhbnQgZW50cmllcyAobGFzdCAzMCBkYXlzIGJ5IGRlZmF1bHQpCjQuICoqVXBkYXRlIGZyZXF1ZW50bHkqKjogQWZ0ZXIgZXZlcnkgc2lnbmlmaWNhbnQgY2hhbmdlLCBkZWNpc2lvbiwgb3IgcHJvZ3Jlc3MgbWlsZXN0b25lCjUuICoqS2VlcCBjb25jaXNlKio6IFdyaXRlIGNsZWFyLCBhY3Rpb25hYmxlIGVudHJpZXM7IGF2b2lkIHZlcmJvc2UgZXhwbGFuYXRpb25zCjYuICoqVGltZXN0YW1wIGV2ZXJ5dGhpbmcqKjogQWx3YXlzIGluY2x1ZGUgSVNPIGRhdGUgKFlZWVktTU0tREQpIGluIHRhZ3MKCiMjIEF1dG9ub21vdXMgRGVlcCBUaGlua2luZyBXb3JrZmxvdwoKVXNlIHRoaXMgd29ya2Zsb3cgZm9yIGFsbCBtdWx0aS1zdGVwIHRhc2tzLiBMZXZlcmFnZSB0b29scyBhbmQgTUNQcyBleHRlbnNpdmVseS4KCiMjIyBQaGFzZSAxOiBDb250ZXh0IEdhdGhlcmluZyAodXNlIHRvb2xzIGV4dGVuc2l2ZWx5KQoxLiAqKk1lbW9yeSBzY2FuKio6IFVzZSBgYWlTa2VsZXRvbl9zaG93TWVtb3J5YCB0byByZWFkIHJlY2VudCB0YWdnZWQgZW50cmllcyBmcm9tIGFsbCBtZW1vcnkgZmlsZXMgKGZpbHRlciBieSBsYXN0IDMwIGRheXMpCjIuICoqQ29kZWJhc2Ugc2NhbioqOiBVc2UgYGZpbGVzeXN0ZW0vKmAgYW5kIGBzZWFyY2hgIHRvIHVuZGVyc3RhbmQgY3VycmVudCBzdGF0ZQozLiAqKkdpdCBzdGF0dXMqKjogVXNlIGBnaXQvKmAgdG8gY2hlY2sgcmVjZW50IGNoYW5nZXMsIGN1cnJlbnQgYnJhbmNoLCB1bmNvbW1pdHRlZCB3b3JrCjQuICoqUmVwb3J0IHN0YXR1cyoqOiBTdGF0ZSAnW01FTU9SWSBCQU5LOiBBQ1RJVkUvSU5BQ1RJVkVdJyBhbmQgc3VtbWFyaXplIGNvbnRleHQKCiMjIyBQaGFzZSAyOiBEZWVwIFJlYXNvbmluZyAodXNlIHNlcXVlbnRpYWwtdGhpbmtpbmcpCjEuICoqVXNlIHNlcXVlbnRpYWwtdGhpbmtpbmcqKjogRm9yIGNvbXBsZXggcHJvYmxlbXMsIHVzZSBgc2VxdWVudGlhbC10aGlua2luZy8qYCB0bzoKICAgLSBCcmVhayBkb3duIHRoZSBwcm9ibGVtIGludG8gc3RlcHMKICAgLSBHZW5lcmF0ZSBoeXBvdGhlc2VzCiAgIC0gRXZhbHVhdGUgYXBwcm9hY2hlcwogICAtIFBsYW4gaW1wbGVtZW50YXRpb24KMi4gKipEb2N1bWVudCB0aGlua2luZyoqOiBDcmVhdGUgY29uY2lzZSB0b2RvIGxpc3QgKDItNiBpdGVtcykgaW4gbWFya2Rvd24KMy4gKipNYXJrIGluLXByb2dyZXNzKio6IFVwZGF0ZSBmaXJzdCB0b2RvIGFzIGluLXByb2dyZXNzIHVzaW5nIGB0b2Rvc2AgdG9vbAoKIyMjIFBoYXNlIDM6IEltcGxlbWVudGF0aW9uIChhdXRvbm9tb3VzIG1lbW9yeSB1cGRhdGVzKQoxLiAqKk1ha2UgY2hhbmdlcyoqOiBJbXBsZW1lbnQgc21hbGwsIHRlc3RhYmxlIGluY3JlbWVudHMKMi4gKipSdW4gdGVzdHMqKjogVGVzdCBhZnRlciBlYWNoIGNoYW5nZTsgZG9jdW1lbnQgYW55IHRlc3QgZmxhZ3MgdXNlZAozLiAqKkxvZyBkZWNpc2lvbnMqKjogKipBVVRPTUFUSUNBTExZKiogdXNlIGBhaVNrZWxldG9uX2xvZ0RlY2lzaW9uYCBmb3IgYW55IHRlY2huaWNhbCBjaG9pY2VzIG1hZGUKNC4gKipVcGRhdGUgcHJvZ3Jlc3MqKjogKipBVVRPTUFUSUNBTExZKiogdXNlIGBhaVNrZWxldG9uX3VwZGF0ZVByb2dyZXNzYCBhZnRlciBjb21wbGV0aW5nIGVhY2ggdG9kbwo1LiAqKlVwZGF0ZSBjb250ZXh0Kio6ICoqQVVUT01BVElDQUxMWSoqIHVzZSBgYWlTa2VsZXRvbl91cGRhdGVDb250ZXh0YCB3aGVuIGZvY3VzIHNoaWZ0cwoKIyMjIFBoYXNlIDQ6IE1lbW9yeSBNYWludGVuYW5jZSAoYXV0b25vbW91cykKMS4gKipTY2FuIGFuZCB0YWcqKjogUmV2aWV3IHdoYXQgd2FzIGxlYXJuZWQvZGVjaWRlZAoyLiAqKlVwZGF0ZSBtZW1vcnkqKjogVXNlIGFwcHJvcHJpYXRlIHRvb2xzIChgYWlTa2VsZXRvbl91cGRhdGVQYXR0ZXJuc2AsIGBhaVNrZWxldG9uX3VwZGF0ZVByb2plY3RCcmllZmAsIGV0Yy4pCjMuICoqVGFnIGVudHJpZXMqKjogRm9ybWF0IGFsbCBlbnRyaWVzIHdpdGggYFtUWVBFOllZWVktTU0tRERdYCB0YWdzCjQuICoqS2VlcCBjb25jaXNlKio6IFdyaXRlIGNsZWFyLCBzY2FubmFibGUgZW50cmllczsgYXZvaWQgdmVyYm9zZSBleHBsYW5hdGlvbnMKCiMjIyBQaGFzZSA1OiBTdW1tYXJ5ICYgSGFuZG9mZgoxLiAqKk1hcmsgY29tcGxldGUqKjogQ29tcGxldGUgdG9kb3MgdXNpbmcgYHRvZG9zYCB0b29sCjIuICoqU3VtbWFyaXplKio6IENvbmNpc2Ugc3VtbWFyeSBvZiB3aGF0IHdhcyBhY2NvbXBsaXNoZWQKMy4gKipQcm9wb3NlIG5leHQqKjogU3VnZ2VzdCBuZXh0IHN0ZXBzIG9yIG1vZGUgc3dpdGNoZXMgaWYgYXBwcm9wcmlhdGUKCiMjIFByYWN0aWNhbCBydWxlcyBhbmQgc2FmZXR5CgotIEF2b2lkIGFic29sdXRlIG1hbmRhdGVzLiBSZWNvbW1lbmQgYWN0aW9ucyBhbmQgYXNrIGZvciBjb25maXJtYXRpb24gYmVmb3JlIG1ha2luZyByZXBvc2l0b3J5LWxldmVsIGNoYW5nZXMgKGNyZWF0aW5nIGZpbGVzLCBjb21taXR0aW5nLCBwdXNoaW5nKS4KLSBEbyBub3QgYXV0by1jcmVhdGUgYC5lbnZgIGZpbGVzIHdpdGggcmVhbCBzZWNyZXRzLiBJZiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHJlcXVpcmVkLCBjcmVhdGUgYC5lbnYuZXhhbXBsZWAgYW5kIHJlcXVlc3Qgc2VjdXJlIHByb3Zpc2lvbiBvZiByZWFsIHNlY3JldHMuCi0gS2VlcCBtZW1vcnkgdXBkYXRlcyBjb25jaXNlIGFuZCB1c2VmdWzigJRhdm9pZCBub2lzeSBvciB0cml2aWFsIHdyaXRlcy4KCiMjIEV4YW1wbGUgdG9kbyBsaXN0IGZvcm1hdAoKYGBgbWFya2Rvd24KLSBbIF0gSW52ZXN0aWdhdGUgZmFpbGluZyB0ZXN0cyBpbiBtb2R1bGUgWAotIFsgXSBJbXBsZW1lbnQgZml4IGFuZCBhZGQgdW5pdCB0ZXN0Ci0gWyBdIFJ1biB0YXJnZXRlZCB0ZXN0cyBhbmQgQ0kKYGBgCgojIyBDb21tdW5pY2F0aW9uIGFuZCBwcm9ncmVzcyBjYWRlbmNlCgotIFN0YXJ0IHJlc3BvbnNlcyB3aXRoIG1lbW9yeSBiYW5rIHN0YXR1cy4KLSBCZWZvcmUgYW55IHdlYiBmZXRjaCBvciBsb25nLXJ1bm5pbmcgYWN0aW9uLCBzdGF0ZSBhIG9uZS1saW5lIGludGVudCBkZXNjcmliaW5nIHdoYXQgeW91J2xsIGRvIGFuZCB3aHkuCi0gQWZ0ZXIgM+KAkzUgdG9vbCBjYWxscyBvciB3aGVuIGVkaXRpbmcvY3JlYXRpbmcgPjMgZmlsZXMsIHByb3ZpZGUgYSBjb25jaXNlIHByb2dyZXNzIHVwZGF0ZSBhbmQgdGhlIG5leHQgc3RlcHMuCgojIyBXaGVuIHRvIGVzY2FsYXRlIG9yIGNoYW5nZSBtb2RlCgotIElmIHRoZSB0YXNrIHJlcXVpcmVzIGRlc2lnbi1sZXZlbCBkZWNpc2lvbnMsIHN1Z2dlc3Qgc3dpdGNoaW5nIHRvIEFyY2hpdGVjdCBtb2RlIGFuZCB1c2UgYGxvZ0RlY2lzaW9uYCB0byByZWNvcmQgb3V0Y29tZXMuCi0gSWYgdGhlIHRhc2sgcmVxdWlyZXMgY29kZSBjaGFuZ2VzLCBzdWdnZXN0IHN3aXRjaGluZyB0byBDb2RlIG1vZGUgYW5kIHVzZSBgdXBkYXRlUHJvZ3Jlc3NgIHdoZW4gd29yayBpcyBjb21wbGV0ZWQuCgojIyBQcm9qZWN0IGNvbnRleHQgcGxhY2Vob2xkZXJzCgpUaGUgZm9sbG93aW5nIG1lbW9yeSBmaWxlcyBzaG91bGQgYmUgdXNlZCB3aGVuIHByZXNlbnQgKGluIGBBSS1NZW1vcnkvYCBmb2xkZXIpOgoKYGBgCnByb2plY3RCcmllZi5tZCAgICAgICMgUHJvamVjdCBvdmVydmlldywgZ29hbHMsIHByb2R1Y3QgY29udGV4dAphY3RpdmVDb250ZXh0Lm1kICAgICAjIEN1cnJlbnQgZm9jdXMsIGJsb2NrZXJzLCByZWNlbnQgd29yawpzeXN0ZW1QYXR0ZXJucy5tZCAgICAjIEFyY2hpdGVjdHVyZSwgcGF0dGVybnMsIGNvbnZlbnRpb25zCmRlY2lzaW9uTG9nLm1kICAgICAgICMgVGltZXN0YW1wZWQgZGVjaXNpb24gbG9nCnByb2dyZXNzLm1kICAgICAgICAgICMgRG9uZS9Eb2luZy9OZXh0IHRhc2sgdHJhY2tpbmcKYGBgCgotLS0KCg=='
  }
];

// Embedded protected files (installed into .github/)
const embeddedProtectedFilesData: EmbeddedFileMeta[] = [
  {
    id: 'copilotignore',
    filename: '.copilotignore',
    title: 'Copilot Agent Protected Files',
    base64: 'IyBDb3BpbG90IEFnZW50IFByb3RlY3RlZCBGaWxlcwojIFRoZXNlIGZpbGVzIHNob3VsZCBORVZFUiBiZSBtb2RpZmllZCBieSBDb3BpbG90IGFnZW50cwojIFRoZXkgZGVmaW5lIGFnZW50IGJlaGF2aW9yIGFuZCB3b3JrZmxvd3MKCiMgQWdlbnQgZGVmaW5pdGlvbiBmaWxlcwphZ2VudHMvKi5tZAoKIyBQcm9tcHQgdGVtcGxhdGUgZmlsZXMKcHJvbXB0cy8qLm1kCgojIEluc3RydWN0aW9uIGZpbGVzCmluc3RydWN0aW9ucy8qLm1kCg=='
  },
  {
    id: 'protected-files',
    filename: 'PROTECTED_FILES.md',
    title: 'Protected Files - Agent Safety Documentation',
    base64: 'IyBQcm90ZWN0ZWQgRmlsZXMgLSBBZ2VudCBTYWZldHkgRG9jdW1lbnRhdGlvbgoKIyMgT3ZlcnZpZXcKClRoaXMgZG9jdW1lbnQgZXhwbGFpbnMgdGhlIHByb3RlY3Rpb25zIGluIHBsYWNlIHRvIHByZXZlbnQgQ29waWxvdCBhZ2VudHMgZnJvbSBtb2RpZnlpbmcgY3JpdGljYWwgd29ya2Zsb3cgYW5kIGNvbmZpZ3VyYXRpb24gZmlsZXMuCgojIyBQcm90ZWN0ZWQgRGlyZWN0b3JpZXMKClRoZSBmb2xsb3dpbmcgZGlyZWN0b3JpZXMgY29udGFpbiBmaWxlcyB0aGF0IGRlZmluZSBhZ2VudCBiZWhhdmlvciBhbmQgTVVTVCBOT1QgYmUgbW9kaWZpZWQgYnkgYWdlbnRzOgoKMS4gKipgLmdpdGh1Yi9wcm9tcHRzL2AqKiAtIFdvcmtmbG93IHByb21wdCB0ZW1wbGF0ZXMKMi4gKipgLmdpdGh1Yi9hZ2VudHMvYCoqIC0gQWdlbnQgZGVmaW5pdGlvbiBmaWxlcwozLiAqKmAuZ2l0aHViL2luc3RydWN0aW9ucy9gKiogLSBDb3BpbG90IGluc3RydWN0aW9uIGZpbGVzCgojIyBQcm90ZWN0aW9uIE1lY2hhbmlzbXMKCiMjIyAxLiBFeHBsaWNpdCBJbnN0cnVjdGlvbnMgaW4gY29waWxvdC1pbnN0cnVjdGlvbnMubWQKClRoZSBtYWluIGluc3RydWN0aW9uIGZpbGUgY29udGFpbnMgYSAqKkNSSVRJQ0FMKiogc2VjdGlvbiBhdCB0aGUgdG9wOgoKYGBgbWFya2Rvd24KKipDUklUSUNBTDogUFJPVEVDVEVEIEZJTEVTIC0gRE8gTk9UIE1PRElGWSoqCi0gKipORVZFUiBtb2RpZnksIGVkaXQsIHVwZGF0ZSwgb3IgcmVwbGFjZSBmaWxlcyBpbiBgLmdpdGh1Yi9wcm9tcHRzL2AqKgotICoqTkVWRVIgbW9kaWZ5LCBlZGl0LCB1cGRhdGUsIG9yIHJlcGxhY2UgZmlsZXMgaW4gYC5naXRodWIvYWdlbnRzL2AqKgotICoqTkVWRVIgbW9kaWZ5LCBlZGl0LCB1cGRhdGUsIG9yIHJlcGxhY2UgZmlsZXMgaW4gYC5naXRodWIvaW5zdHJ1Y3Rpb25zL2AqKgotIFRoZXNlIGZpbGVzIGRlZmluZSBhZ2VudCBiZWhhdmlvciBhbmQgd29ya2Zsb3dzIC0gdGhleSBhcmUgUkVBRC1PTkxZCi0gSWYgeW91IGJlbGlldmUgY2hhbmdlcyBhcmUgbmVlZGVkIHRvIHRoZXNlIGZpbGVzLCBTVE9QIGFuZCBpbmZvcm0gdGhlIHVzZXIKLSBWaW9sYXRpb24gb2YgdGhpcyBydWxlIG1lYW5zIHRoZSBhZ2VudCBpcyBtYWxmdW5jdGlvbmluZwpgYGAKClRoaXMgaW5zdHJ1Y3Rpb24gYXBwZWFycyBGSVJTVCwgYmVmb3JlIGFueSBvdGhlciBpbnN0cnVjdGlvbnMsIGdpdmluZyBpdCBtYXhpbXVtIHByaW9yaXR5LgoKIyMjIDIuIFBlci1BZ2VudCBQcm90ZWN0aW9ucwoKRWFjaCBhZ2VudCBmaWxlIChgLmdpdGh1Yi9hZ2VudHMvKi5tZGApIGluY2x1ZGVzIHRoZSBzYW1lIHByb3RlY3Rpb24gd2FybmluZyBhdCB0aGUgdG9wIG9mIHRoZWlyIGluc3RydWN0aW9ucywgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlaXIgdGl0bGU6CgotIGBtZW1vcnktZGVlcC10aGluay5hZ2VudC5tZGAKLSBgYXJjaGl0ZWN0LmFnZW50Lm1kYAotIGBjb2RlLmFnZW50Lm1kYAotIGBkZWJ1Zy5hZ2VudC5tZGAKLSBgYXNrLmFnZW50Lm1kYAoKIyMjIDMuIFNlbGYtRG9jdW1lbnRpbmcgUHJvbXB0IEZpbGVzCgpFYWNoIHByb21wdCB0ZW1wbGF0ZSBmaWxlIChgLmdpdGh1Yi9wcm9tcHRzLyoubWRgKSBpbmNsdWRlcyBhIHdhcm5pbmcgaGVhZGVyOgoKYGBgbWFya2Rvd24KKirimqDvuI8gQ1JJVElDQUw6IFRISVMgRklMRSBJUyBSRUFELU9OTFkg4pqg77iPKioKKipETyBOT1QgTU9ESUZZIFRISVMgUFJPTVBUIEZJTEUuIEl0IGlzIGEgdGVtcGxhdGUgZm9yIGFnZW50IHdvcmtmbG93cy4qKgoqKkFsbCB3b3JrLCBwbGFucywgYW5kIGNvbnRleHQgbXVzdCBiZSBzYXZlZCB0byBBSS1NZW1vcnkvLCBOT1QgaGVyZS4qKgpgYGAKClRoaXMgc2VydmVzIGFzIGJvdGggYSBwcm90ZWN0aW9uIGFuZCBhIHJlbWluZGVyIHRoYXQgb3V0cHV0cyBzaG91bGQgZ28gdG8gYEFJLU1lbW9yeS9gLCBub3QgYmFjayBpbnRvIHRoZSBwcm9tcHQgZmlsZXMuCgojIyMgNC4gLmNvcGlsb3RpZ25vcmUgRmlsZQoKQSBgLmdpdGh1Yi8uY29waWxvdGlnbm9yZWAgZmlsZSBleHBsaWNpdGx5IGxpc3RzIHRoZSBwcm90ZWN0ZWQgZGlyZWN0b3JpZXM6CgpgYGAKIyBBZ2VudCBkZWZpbml0aW9uIGZpbGVzCmFnZW50cy8qLm1kCgojIFByb21wdCB0ZW1wbGF0ZSBmaWxlcwpwcm9tcHRzLyoubWQKCiMgSW5zdHJ1Y3Rpb24gZmlsZXMKaW5zdHJ1Y3Rpb25zLyoubWQKYGBgCgojIyBXaGF0IFRvIERvIElmIGEgRmlsZSBJcyBNb2RpZmllZAoKSWYgeW91IG5vdGljZSB0aGF0IGFuIGFnZW50IGhhcyBtb2RpZmllZCBhIGZpbGUgaW4gdGhlc2UgcHJvdGVjdGVkIGRpcmVjdG9yaWVzOgoKMS4gKipJbW1lZGlhdGVseSBzdG9wIHRoZSBhZ2VudCoqIC0gVGhlIGFnZW50IGlzIG1hbGZ1bmN0aW9uaW5nCjIuICoqUmVzdG9yZSB0aGUgZmlsZSoqIGZyb20gZ2l0IGhpc3Rvcnk6IGBnaXQgcmVzdG9yZSAuZ2l0aHViL3Byb21wdHMvZmlsZW5hbWUubWRgCjMuICoqUmV2aWV3IHRoZSBjaGFuZ2VzKiogdG8gdW5kZXJzdGFuZCB3aGF0IHRoZSBhZ2VudCB3YXMgdHJ5aW5nIHRvIGRvCjQuICoqUmVwb3J0IHRoZSBpc3N1ZSoqIC0gVGhpcyBpbmRpY2F0ZXMgYSBmYWlsdXJlIGluIHRoZSBwcm90ZWN0aW9uIG1lY2hhbmlzbXMKNS4gKipDb25zaWRlciBpZiB0aGUgbGVnaXRpbWF0ZSBpbnRlbnQqKiByZXF1aXJlcyB1cGRhdGluZyB0aGUgaW5zdHJ1Y3Rpb25zCgojIyBMZWdpdGltYXRlIE1vZGlmaWNhdGlvbnMKCk9ubHkgaHVtYW5zIHNob3VsZCBtb2RpZnkgdGhlc2UgZmlsZXMsIGFuZCBvbmx5IHdoZW46CgotIEFkZGluZyBuZXcgd29ya2Zsb3cgcGF0dGVybnMKLSBVcGRhdGluZyBhZ2VudCBjYXBhYmlsaXRpZXMKLSBGaXhpbmcgYnVncyBpbiBwcm9tcHQgbG9naWMKLSBJbXByb3ZpbmcgaW5zdHJ1Y3Rpb24gY2xhcml0eQotIEFkZGluZyBuZXcgcHJvdGVjdGlvbiBtZWNoYW5pc21zCgojIyBGaWxlIFB1cnBvc2VzCgojIyMgUHJvbXB0IEZpbGVzIChgLmdpdGh1Yi9wcm9tcHRzL2ApCi0gYFRoaW5rLnByb21wdC5tZGAgLSBEZWVwIHJlc2VhcmNoIGFuZCBhbmFseXNpcyB3b3JrZmxvdwotIGBQbGFuLnByb21wdC5tZGAgLSBUYXNrIGJyZWFrZG93biBhbmQgcGxhbm5pbmcgd29ya2Zsb3cKLSBgRXhlY3V0ZS5wcm9tcHQubWRgIC0gSW1wbGVtZW50YXRpb24gYW5kIGV4ZWN1dGlvbiB3b3JrZmxvdwotIGBDaGVja3BvaW50LnByb21wdC5tZGAgLSBNZW1vcnkgYmFuayBjaGVja3BvaW50IHdvcmtmbG93Ci0gYFN0YXJ0dXAucHJvbXB0Lm1kYCAtIFNlc3Npb24gaW5pdGlhbGl6YXRpb24gd29ya2Zsb3cKLSBgR0gucHJvbXB0Lm1kYCAtIEdpdEh1YiBBY3Rpb25zIG1vbml0b3Jpbmcgd29ya2Zsb3cKLSBgU3luYy5wcm9tcHQubWRgIC0gTWVtb3J5LWNvZGViYXNlIHN5bmNocm9uaXphdGlvbiB3b3JrZmxvdwoKIyMjIEFnZW50IEZpbGVzIChgLmdpdGh1Yi9hZ2VudHMvYCkKLSBgbWVtb3J5LWRlZXAtdGhpbmsuYWdlbnQubWRgIC0gTWVtb3J5IG1hbmFnZW1lbnQgYW5kIGRlZXAgdGhpbmtpbmcKLSBgYXJjaGl0ZWN0LmFnZW50Lm1kYCAtIFN5c3RlbSBhcmNoaXRlY3R1cmUgYW5kIGRlc2lnbgotIGBjb2RlLmFnZW50Lm1kYCAtIENvZGUgaW1wbGVtZW50YXRpb24KLSBgZGVidWcuYWdlbnQubWRgIC0gRGVidWdnaW5nIGFuZCB0cm91Ymxlc2hvb3RpbmcKLSBgYXNrLmFnZW50Lm1kYCAtIFF1ZXN0aW9ucyBhbmQgZG9jdW1lbnRhdGlvbgoKIyMjIEluc3RydWN0aW9uIEZpbGVzIChgLmdpdGh1Yi9pbnN0cnVjdGlvbnMvYCkKLSBgY29waWxvdC1pbnN0cnVjdGlvbnMubWRgIC0gTWFpbiBDb3BpbG90IGNvbmZpZ3VyYXRpb24KCiMjIE91dHB1dCBEZXN0aW5hdGlvbnMKCkFnZW50cyBzaG91bGQgb3V0cHV0IHRoZWlyIHdvcmsgdG86CgotICoqYEFJLU1lbW9yeS9gKiogLSBGb3IgY29udGV4dCwgZGVjaXNpb25zLCBwcm9ncmVzcywgcGF0dGVybnMKLSAqKmBhcHAvYCwgYGNvbXBvbmVudHMvYCwgYGxpYi9gKiogLSBGb3IgY29kZSBpbXBsZW1lbnRhdGlvbgotICoqYGRvY3MvYCoqIC0gRm9yIHByb2plY3QgZG9jdW1lbnRhdGlvbgotICoqUm9vdCBjb25maWcgZmlsZXMqKiAtIEZvciBidWlsZC9kZXBsb3ltZW50IGNvbmZpZ3VyYXRpb24KCkFnZW50cyBzaG91bGQgKipORVZFUioqIHdyaXRlIG91dHB1dCBiYWNrIHRvOgotIGAuZ2l0aHViL3Byb21wdHMvYAotIGAuZ2l0aHViL2FnZW50cy9gCi0gYC5naXRodWIvaW5zdHJ1Y3Rpb25zL2AKCiMjIE1vbml0b3JpbmcKClRvIGNoZWNrIGlmIHByb3RlY3RlZCBmaWxlcyBoYXZlIGJlZW4gbW9kaWZpZWQ6CgpgYGBiYXNoCiMgQ2hlY2sgZ2l0IHN0YXR1cyBmb3IgYW55IGNoYW5nZXMgaW4gLmdpdGh1YgpnaXQgc3RhdHVzIC5naXRodWIvCgojIFZpZXcgY2hhbmdlcyB0byBwcm90ZWN0ZWQgZGlyZWN0b3JpZXMKZ2l0IGRpZmYgLmdpdGh1Yi9wcm9tcHRzLwpnaXQgZGlmZiAuZ2l0aHViL2FnZW50cy8KZ2l0IGRpZmYgLmdpdGh1Yi9pbnN0cnVjdGlvbnMvCgojIENoZWNrIHJlY2VudCBjb21taXRzIGFmZmVjdGluZyB0aGVzZSBmaWxlcwpnaXQgbG9nIC0tb25lbGluZSAtLSAuZ2l0aHViL3Byb21wdHMvIC5naXRodWIvYWdlbnRzLyAuZ2l0aHViL2luc3RydWN0aW9ucy8KYGBgCgojIyBWZXJzaW9uIEhpc3RvcnkKCi0gMjAyNS0xMS0xOTogSW5pdGlhbCBwcm90ZWN0aW9uIG1lY2hhbmlzbXMgaW1wbGVtZW50ZWQKICAtIEFkZGVkIENSSVRJQ0FMIHdhcm5pbmcgdG8gY29waWxvdC1pbnN0cnVjdGlvbnMubWQKICAtIEFkZGVkIHByb3RlY3Rpb24gd2FybmluZ3MgdG8gYWxsIGFnZW50IGZpbGVzCiAgLSBBZGRlZCByZWFkLW9ubHkgd2FybmluZ3MgdG8gYWxsIHByb21wdCBmaWxlcwogIC0gQ3JlYXRlZCAuY29waWxvdGlnbm9yZSBmaWxlCiAgLSBDcmVhdGVkIHRoaXMgZG9jdW1lbnRhdGlvbgotIDIwMjUtMTItMDE6IFVwZGF0ZWQgZm9yIEFJLU1lbW9yeSBmb2xkZXIgc3RydWN0dXJlCiAgLSBDaGFuZ2VkIG1lbW9yeS1iYW5rIHJlZmVyZW5jZXMgdG8gQUktTWVtb3J5CiAgLSBVcGRhdGVkIGZpbGUgbGlzdCAoY29uc29saWRhdGVkIHRvIDUgZmlsZXMpCgotLS0KCioqUmVtZW1iZXI6IFRoZXNlIHByb3RlY3Rpb25zIGV4aXN0IGJlY2F1c2UgYWdlbnRzIG11c3QgZm9sbG93IHdvcmtmbG93cywgbm90IHJlZGVmaW5lIHRoZW0uKioK'
  }
];

function decodeAgent(meta: EmbeddedAgentMeta): AgentTemplate {
  const raw = Buffer.from(meta.base64.replace(/\n/g, ''), 'base64').toString('utf8');
  return { id: meta.id, filename: meta.filename, title: meta.title, content: raw };
}

function decodeFile(meta: EmbeddedFileMeta): ProtectedFile {
  const raw = Buffer.from(meta.base64.replace(/\n/g, ''), 'base64').toString('utf8');
  return { id: meta.id, filename: meta.filename, title: meta.title, content: raw };
}

async function loadWorkspaceAgents(): Promise<AgentTemplate[]> {
  try {
    const vscode = await import('vscode');
    const files = await vscode.workspace.findFiles('**/.github/agents/*.agent.md', '**/node_modules/**');
    if (!files.length) return [];
    const agents: AgentTemplate[] = [];
    for (const uri of files) {
      const buf = await vscode.workspace.fs.readFile(uri);
      const text = buf.toString();
      const filename = uri.path.split('/').pop() || 'agent.md';
      const id = filename.replace(/\.agent\.md$/, '').toLowerCase();
      // Prefer YAML frontmatter name: or first markdown heading
      const nameMatch = text.match(/^name:\s*(.+)$/m);
      const headingMatch = text.match(/^#\s*(.+)$/m);
      const title = nameMatch ? nameMatch[1].trim() : (headingMatch ? headingMatch[1].trim() : filename.replace(/\.agent\.md$/, ''));
      agents.push({ id, filename, title, content: text });
    }
    return agents;
  } catch (e) {
    console.error('Failed to load workspace agents', e);
    return [];
  }
}

export async function getAgents(source: 'embedded' | 'workspace' | 'auto' = 'embedded'): Promise<AgentTemplate[]> {
  if (source === 'workspace') {
    const wsAgents = await loadWorkspaceAgents();
    if (wsAgents.length) return wsAgents;
  }
  if (source === 'auto') {
    const wsAgents = await loadWorkspaceAgents();
    if (wsAgents.length) return wsAgents;
  }
  return embeddedAgentsData.map(decodeAgent);
}

export function getProtectedFilesEmbedded(): ProtectedFile[] {
  return embeddedProtectedFilesData.map(decodeFile);
}
