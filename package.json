{
  "name": "ai-skeleton-extension",
  "displayName": "AI Skeleton Prompts & Memory",
  "description": "Complete AI agent toolkit: Native memory management (AI-Memory), workflow prompts, MCP integration, and agent definitions.",
  "version": "0.2.6",
  "publisher": "JasdeepN",
  "license": "SEE LICENSE IN LICENSE",
  "repository": {
    "type": "git",
    "url": "https://github.com/JasdeepN/ai-skeleton-extension"
  },
  "engines": {
    "vscode": "^1.95.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished",
    "onLanguageModelTool:aiSkeleton_showMemory",
    "onLanguageModelTool:aiSkeleton_logDecision",
    "onLanguageModelTool:aiSkeleton_updateContext",
    "onLanguageModelTool:aiSkeleton_updateProgress",
    "onLanguageModelTool:aiSkeleton_updatePatterns",
    "onLanguageModelTool:aiSkeleton_markDeprecated",
    "onLanguageModelTool:aiSkeleton_updateProjectBrief",
    "onLanguageModelTool:aiSkeleton_saveResearch",
    "onLanguageModelTool:aiSkeleton_savePlan",
    "onLanguageModelTool:aiSkeleton_saveExecution",
    "onLanguageModelTool:aiSkeleton_editEntry",
    "onLanguageModelTool:aiSkeleton_appendToEntry",
    "onChatParticipant:aiSkeleton",
    "onView:aiSkeletonPromptsView",
    "onView:aiSkeletonMemoryView",
    "onView:aiSkeletonDiagnosticsView",
    "onView:aiSkeletonMCPView"
  ],
  "main": "./dist/extension.js",
  "capabilities": {
    "chatParticipant": true
  },
  "contributes": {
    "chatParticipants": [
      {
        "id": "aiSkeleton",
        "name": "aiSkeleton",
        "description": "Memory-aware AI assistant with access to your project's decision log, context, and patterns"
      }
    ],
    "configuration": {
      "properties": {
        "aiSkeleton.prompts.source": {
          "type": "string",
          "enum": [
            "auto",
            "embedded",
            "workspace"
          ],
          "default": "auto",
          "description": "Choose prompt loading strategy. auto uses workspace .github/prompts if present else embedded copy."
        },
        "aiSkeleton.setup.showPrompt": {
          "type": "boolean",
          "default": true,
          "description": "Show setup prompt on startup when components are missing. Offers to install AI-Memory, prompts, agents, and protected files."
        },
        "aiSkeleton.memory.autoStart": {
          "type": "boolean",
          "default": true,
          "description": "Automatically detect and initialize Memory Bank on startup. Shows prompt to create if not found."
        },
        "aiSkeleton.memory.showWelcome": {
          "type": "boolean",
          "default": true,
          "description": "Show welcome notification when Memory Bank is active on startup."
        },
        "aiSkeleton.mcp.autoStart": {
          "type": "boolean",
          "default": false,
          "description": "Automatically start MCP servers defined in .vscode/mcp.json on startup. Prompts on first run."
        },
        "aiSkeleton.mcp.priority": {
          "type": "string",
          "enum": [
            "mcp",
            "extension",
            "mixed"
          ],
          "default": "mcp",
          "description": "Tool priority order for the unified registry. mcp = MCP tools first (default), extension = extension tools first, mixed = interleave sources."
        },
        "aiSkeleton.restrictions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "List of tool names/globs/regex patterns to block from the unified registry (applied before exposing tools to the model)."
        }
      }
    },
    "commands": [
      {
        "command": "aiSkeleton.listPrompts",
        "title": "AI Skeleton: List Prompts"
      },
      {
        "command": "aiSkeleton.openPrompt",
        "title": "AI Skeleton: Open Prompt"
      },
      {
        "command": "aiSkeleton.insertPrompt",
        "title": "AI Skeleton: Insert Prompt at Cursor"
      },
      {
        "command": "aiSkeleton.copyPrompt",
        "title": "AI Skeleton: Copy Prompt to Clipboard"
      },
      {
        "command": "aiSkeleton.savePrompt",
        "title": "AI Skeleton: Save Prompt to File..."
      },
      {
        "command": "aiSkeleton.installPrompts",
        "title": "AI Skeleton: Install Built-in Prompts to Workspace (.github/prompts)"
      },
      {
        "command": "aiSkeleton.installAgents",
        "title": "AI Skeleton: Install Agent Templates to Workspace (.github/agents)"
      },
      {
        "command": "aiSkeleton.installProtectedFiles",
        "title": "AI Skeleton: Install Protected Files (.github)"
      },
      {
        "command": "aiSkeleton.installPrompt",
        "title": "AI Skeleton: Install Single Prompt to Workspace (.github/prompts)"
      },
      {
        "command": "aiSkeleton.installAll",
        "title": "AI Skeleton: Install All (Prompts, Agents, Protected)"
      },
      {
        "command": "aiSkeleton.installMCPs",
        "title": "AI Skeleton: Install MCP Servers (.vscode/mcp.json)"
      },
      {
        "command": "aiSkeleton.tools.listRegistered",
        "title": "AI Skeleton: List Registered LM Tools"
      },
      {
        "command": "aiSkeleton.memory.showStatus",
        "title": "AI Skeleton: Memory Bank Status"
      },
      {
        "command": "aiSkeleton.memory.create",
        "title": "AI Skeleton: Create Memory Bank"
      },
      {
        "command": "aiSkeleton.memory.dump",
        "title": "Export Memory Reports",
        "category": "AI-Memory"
      },
      {
        "command": "aiSkeleton.copyMemoryEntry",
        "title": "Copy Content",
        "category": "AI-Memory"
      },
      {
        "command": "aiSkeleton.referenceInContext",
        "title": "Reference in Context",
        "category": "AI-Memory"
      },
      {
        "command": "aiSkeleton.openMemoryEntry",
        "title": "Open Memory Entry",
        "category": "AI-Memory"
      },
      {
        "command": "aiSkeleton.memory.generateEmbeddings",
        "title": "AI Skeleton: Generate Embeddings for All Entries",
        "icon": "$(sparkle)"
      },
      {
        "command": "aiSkeleton.memory.show",
        "title": "AI Skeleton: Show Memory Summary"
      },
      {
        "command": "aiSkeleton.memory.logDecision",
        "title": "AI Skeleton: Log Decision"
      },
      {
        "command": "aiSkeleton.memory.updateContext",
        "title": "AI Skeleton: Update Context"
      },
      {
        "command": "aiSkeleton.memory.updateProgress",
        "title": "AI Skeleton: Update Progress"
      },
      {
        "command": "aiSkeleton.memory.updatePatterns",
        "title": "AI Skeleton: Update System Patterns"
      },
      {
        "command": "aiSkeleton.memory.exportResearchReport",
        "title": "AI Skeleton: Export Research Report"
      },
      {
        "command": "aiSkeleton.memory.exportPlanReport",
        "title": "AI Skeleton: Export Plan Report"
      },
      {
        "command": "aiSkeleton.memory.exportExecutionReport",
        "title": "AI Skeleton: Export Execution Report"
      },
      {
        "command": "aiSkeleton.memory.exportAllReports",
        "title": "AI Skeleton: Export All Phase Reports"
      },
      {
        "command": "aiSkeleton.memory.refresh",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "aiSkeleton.diagnostics.refresh",
        "title": "AI Skeleton: Diagnostics Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "aiSkeleton.diagnostics.runSelfTest",
        "title": "AI Skeleton: Run Diagnostics"
      },
      {
        "command": "aiSkeleton.diagnostics.openReadme",
        "title": "AI Skeleton: Open README"
      },
      {
        "command": "aiSkeleton.startMCPs",
        "title": "AI Skeleton: Start MCP Servers"
      }
    ],
    "languageModelTools": [
      {
        "name": "aiSkeleton_showMemory",
        "displayName": "Show Memory Bank",
        "toolReferenceName": "showMemory",
        "icon": "$(database)",
        "userDescription": "Read AI-Memory contents (context, decisions, progress, patterns)",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Read and display memory bank contents. Use this to retrieve project context, decisions, progress, and patterns. Call this at the start of sessions to understand project state.",
        "inputSchema": {
          "type": "object",
          "properties": {}
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      },
      {
        "name": "aiSkeleton_logDecision",
        "displayName": "Log Decision",
        "toolReferenceName": "logDecision",
        "icon": "$(note)",
        "userDescription": "Log architectural or technical decisions with rationale",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Log an architectural, technical, or project decision to the memory bank with timestamp. Use this AUTOMATICALLY after making any significant technical choice.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "decision": {
              "type": "string",
              "description": "The decision that was made"
            },
            "rationale": {
              "type": "string",
              "description": "The reasoning behind the decision"
            }
          },
          "required": [
            "decision",
            "rationale"
          ]
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      },
      {
        "name": "aiSkeleton_saveResearch",
        "displayName": "Save Research",
        "toolReferenceName": "saveResearch",
        "icon": "$(telescope)",
        "userDescription": "Save research findings from Think.prompt.md workflow",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Save research findings following Think.prompt.md Research Brief template. Use this for research outputs, NOT updateProjectBrief (which is for overall project goals/scope). SMART: If no content provided, auto-synthesizes report from recent DECISION and CONTEXT entries.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "content": {
              "type": "string",
              "description": "Optional: The research brief content following Think.prompt.md template. If not provided, auto-synthesizes from memory entries."
            }
          },
          "required": []
        },
        "tags": [
          "ai-skeleton",
          "memory",
          "research"
        ]
      },
      {
        "name": "aiSkeleton_savePlan",
        "displayName": "Save Plan",
        "toolReferenceName": "savePlan",
        "icon": "$(list-tree)",
        "userDescription": "Save implementation plan from Plan.prompt.md workflow",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Save implementation plan following Plan.prompt.md template. Use this for planning outputs with task breakdowns, NOT updateProjectBrief (which is for overall project goals/scope). SMART: If no content provided, auto-synthesizes report from recent PROGRESS and DECISION entries.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "content": {
              "type": "string",
              "description": "Optional: The implementation plan content following Plan.prompt.md template. If not provided, auto-synthesizes from memory entries."
            }
          },
          "required": []
        },
        "tags": [
          "ai-skeleton",
          "memory",
          "planning"
        ]
      },
      {
        "name": "aiSkeleton_saveExecution",
        "displayName": "Save Execution",
        "toolReferenceName": "saveExecution",
        "icon": "$(check-all)",
        "userDescription": "Save execution summary from Execute.prompt.md workflow",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Save execution summary following Execute.prompt.md template. Use this for execution reports and completion summaries, NOT updateProjectBrief (which is for overall project goals/scope). SMART: If no content provided, auto-synthesizes report from recent PROGRESS, DECISION, and CONTEXT entries.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "content": {
              "type": "string",
              "description": "Optional: The execution summary content following Execute.prompt.md template. If not provided, auto-synthesizes from memory entries."
            }
          },
          "required": []
        },
        "tags": [
          "ai-skeleton",
          "memory",
          "execution"
        ]
      },
      {
        "name": "aiSkeleton_editEntry",
        "displayName": "Update Context",
        "toolReferenceName": "updateContext",
        "icon": "$(edit)",
        "userDescription": "Update active working context when focus shifts",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Update the active context in memory bank when focus shifts to new tasks or features. Use this AUTOMATICALLY when starting new work or changing focus.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "context": {
              "type": "string",
              "description": "The context update to append"
            }
          },
          "required": [
            "context"
          ]
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      },
      {
        "name": "aiSkeleton_updateProgress",
        "displayName": "Update Progress",
        "toolReferenceName": "updateProgress",
        "icon": "$(checklist)",
        "userDescription": "Track task completion (done/doing/next)",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Update progress tracking after completing tasks or milestones. Use this AUTOMATICALLY after finishing work or starting new tasks.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "item": {
              "type": "string",
              "description": "The task or item to track"
            },
            "status": {
              "type": "string",
              "enum": [
                "done",
                "doing",
                "next"
              ],
              "description": "The status of the item"
            }
          },
          "required": [
            "item",
            "status"
          ]
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      },
      {
        "name": "aiSkeleton_updatePatterns",
        "displayName": "Update System Patterns",
        "toolReferenceName": "updatePatterns",
        "icon": "$(symbol-structure)",
        "userDescription": "Record code patterns, conventions, and best practices",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Record discovered or established patterns, conventions, or best practices. Use when discovering important architectural patterns or establishing conventions.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "pattern": {
              "type": "string",
              "description": "The pattern name"
            },
            "description": {
              "type": "string",
              "description": "Description of the pattern"
            }
          },
          "required": [
            "pattern",
            "description"
          ]
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      },
      {
        "name": "aiSkeleton_updateProjectBrief",
        "displayName": "Update Project Brief",
        "toolReferenceName": "updateBrief",
        "icon": "$(book)",
        "userDescription": "Update project goals, scope, features, or constraints",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Update project brief when goals, scope, features, or constraints change. This file also contains product context.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "content": {
              "type": "string",
              "description": "The content to append to project brief"
            }
          },
          "required": [
            "content"
          ]
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      },
      {
        "name": "aiSkeleton_markDeprecated",
        "displayName": "Mark Deprecated",
        "toolReferenceName": "markDeprecated",
        "icon": "$(trash)",
        "userDescription": "Mark patterns or decisions as deprecated without deletion",
        "canBeReferencedInPrompt": true,
        "modelDescription": "Mark a pattern, decision, or rule as deprecated without deleting it. Use for cleanup while preserving history.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "file": {
              "type": "string",
              "enum": [
                "context",
                "decision",
                "progress",
                "patterns",
                "brief"
              ],
              "description": "The memory type to update (context, decision, progress, patterns, brief)"
            },
            "item": {
              "type": "string",
              "description": "The item to mark as deprecated"
            },
            "reason": {
              "type": "string",
              "description": "Reason for deprecation"
            }
          },
          "required": [
            "file",
            "item",
            "reason"
          ]
        },
        "tags": [
          "ai-skeleton",
          "memory"
        ]
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "aiSkeleton",
          "title": "AI Skeleton",
          "icon": "resources/icon.png"
        }
      ]
    },
    "views": {
      "aiSkeleton": [
        {
          "id": "aiSkeletonMemoryDashboard",
          "name": "Memory Dashboard",
          "icon": "resources/ai-skeleton.svg"
        },
        {
          "id": "aiSkeletonDiagnostics",
          "name": "Diagnostics",
          "icon": "resources/ai-skeleton.svg"
        }
      ],
      "explorer": [
        {
          "id": "aiSkeletonPrompts",
          "name": "AI Skeleton Prompts",
          "icon": "resources/ai-skeleton.svg"
        },
        {
          "id": "aiSkeletonMemory",
          "name": "AI-Memory",
          "icon": "$(database)"
        },
        {
          "id": "aiSkeletonMCP",
          "name": "MCP Servers",
          "icon": "$(server)"
        }
      ]
    },
    "menus": {
      "view/item/context": [
        {
          "command": "aiSkeleton.installPrompt",
          "when": "view == aiSkeletonPrompts && viewItem == promptItem",
          "group": "inline"
        },
        {
          "command": "aiSkeleton.openMemoryEntry",
          "when": "view == aiSkeletonMemory && viewItem == memory-entry-item",
          "group": "1_memory@1"
        },
        {
          "command": "aiSkeleton.copyMemoryEntry",
          "when": "view == aiSkeletonMemory && viewItem == memory-entry-item",
          "group": "1_memory@2"
        },
        {
          "command": "aiSkeleton.referenceInContext",
          "when": "view == aiSkeletonMemory && viewItem == memory-entry-item",
          "group": "2_reference@1"
        }
      ],
      "view/title": [
        {
          "command": "aiSkeleton.installPrompts",
          "when": "view == aiSkeletonPrompts",
          "group": "navigation"
        },
        {
          "command": "aiSkeleton.installAgents",
          "when": "view == aiSkeletonPrompts",
          "group": "navigation"
        },
        {
          "command": "aiSkeleton.installProtectedFiles",
          "when": "view == aiSkeletonPrompts",
          "group": "navigation"
        },
        {
          "command": "aiSkeleton.installAll",
          "when": "view == aiSkeletonPrompts",
          "group": "navigation"
        },
        {
          "command": "aiSkeleton.memory.refresh",
          "when": "view == aiSkeletonMemory",
          "group": "navigation"
        },
        {
          "command": "aiSkeleton.memory.dump",
          "when": "view == aiSkeletonMemory",
          "group": "navigation"
        }
      ]
    }
  },
  "scripts": {
    "sync-tools": "node scripts/sync-agent-tools.js",
    "embed-prompts": "node scripts/embed-prompts.js",
    "embed-agents": "npm run sync-tools && node scripts/embed-agents.js",
    "embed-all": "npm run embed-prompts && npm run embed-agents",
    "vscode:prepublish": "npm run compile-production",
    "compile-production": "npm run embed-all && webpack --mode production",
    "build": "npm run embed-all && webpack --mode none",
    "compile": "tsc -p .",
    "webpack": "webpack --mode none",
    "webpack-dev": "webpack --mode development --watch",
    "watch": "tsc -w",
    "verify": "node scripts/verify.js",
    "test:verify-embeddings": "node scripts/verify-embeddings.js",
    "test:embeddings": "jest tests/embeddings.test.js",
    "test": "jest",
    "test:e2e": "tsc -p . && node ./dist/tests/e2e/runTest.js",
    "test:coverage": "c8 npm test",
    "test:encoding": "node scripts/test-save-prompt.js",
    "test:promptstore": "node scripts/test-prompt-store.js",
    "test:install": "node scripts/install-embedded-prompts.js --dest=./tmp-prompt-install",
    "test:install:single": "node scripts/install-embedded-prompt.js --dest=./tmp-install-single --id=checkpoint",
    "test:install:agents": "node scripts/install-embedded-agents.js --dest=./tmp-agent-install",
    "test:install:protected": "node scripts/install-embedded-protected.js --dest=./tmp-protected-install",
    "package:vsix": "node scripts/package-vsix.js"
  },
  "devDependencies": {
    "@types/glob": "^8.1.0",
    "@types/jest": "^30.0.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "^20.8.0",
    "@types/vscode": "^1.95.0",
    "@types/webpack": "^5.28.5",
    "@vscode/test-electron": "^2.5.2",
    "c8": "^10.1.3",
    "glob": "^13.0.0",
    "jest": "^30.2.0",
    "mocha": "^11.7.5",
    "path-browserify": "^1.0.1",
    "ts-jest": "^29.4.6",
    "ts-loader": "^9.5.4",
    "typescript": "^5.3.0",
    "vsce": "^2.15.0",
    "webpack": "^5.103.0",
    "webpack-cli": "^6.0.1"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.28.0",
    "js-tiktoken": "^1.0.14",
    "minimist": "^1.2.8",
    "sql.js": "^1.12.0"
  }
}
